<form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="employee-form" fxLayout="column" fxLayoutGap="20px" style="max-width: 600px; margin: auto; padding: 20px;">
  <mat-card>
    <mat-card-header>
      <mat-card-title class="mat-h5">{{ isEditMode ? 'Edit Employee' : 'Add Employee' }}</mat-card-title>
    </mat-card-header>
    <mat-card-content fxLayout="column" fxLayoutGap="15px">

      <div fxLayout="row" fxLayoutGap="15px" fxLayout.xs="column">
        <mat-form-field appearance="outline" fxFlex>
          <mat-label>Employee ID</mat-label>
          <input matInput formControlName="employeeId" [disabled]="true" />
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex>
          <mat-label>Employee Name</mat-label>
          <input matInput formControlName="employeeName" />
          <mat-error *ngIf="employeeForm.get('employeeName')?.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>
      </div>

      <div fxLayout="row" fxLayoutGap="15px" fxLayout.xs="column">
        <mat-form-field appearance="outline" fxFlex>
          <mat-label>Mobile Number</mat-label>
          <input matInput formControlName="mobileNum" />
          <mat-error *ngIf="employeeForm.get('mobileNum')?.hasError('required')">
            Mobile number is required
          </mat-error>
          <mat-error *ngIf="employeeForm.get('mobileNum')?.hasError('pattern')">
            Must be 10 digits
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex>
          <mat-label>Date of Birth</mat-label>
          <input matInput type="date" [max]="maxDate" formControlName="dob" (change)="calculateAge()" />
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="80px">
          <mat-label>Age</mat-label>
          <input matInput formControlName="age" [disabled]="true" />
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Address Line 1</mat-label>
        <textarea matInput formControlName="addressLine1" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Address Line 2</mat-label>
        <textarea matInput formControlName="addressLine2" rows="2"></textarea>
      </mat-form-field>

      <div fxLayout="row" fxLayoutGap="15px" fxLayout.xs="column" fxLayoutAlign="start center">
        <mat-form-field appearance="outline" fxFlex="50%">
          <mat-label>Pincode</mat-label>
          <input matInput formControlName="pincode" />
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="50%">
          <mat-label>Country</mat-label>
          <mat-select formControlName="countryId" (selectionChange)="onCountryChange()">
            <mat-option *ngFor="let c of countries" [value]="c.countryId">{{ c.countryName }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>State</mat-label>
        <mat-select formControlName="stateId">
          <mat-option *ngFor="let s of filteredStates" [value]="s.stateId">{{ s.stateName }}</mat-option>
        </mat-select>
      </mat-form-field>

    </mat-card-content>
    <mat-card-actions style="justify-content: flex-end;">
      <button mat-raised-button color="primary" type="submit" [disabled]="employeeForm.invalid">
        {{ isEditMode ? 'Update' : 'Submit' }}
      </button>
    </mat-card-actions>
  </mat-card>
</form>
